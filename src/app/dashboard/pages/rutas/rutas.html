<!-- src/app/dashboard/pages/rutas/rutas.html -->
<h2>Gestión de Rutas</h2>

<div class="controls-top">
  <div class="route-info">
    <span>Puntos: {{ routePoints.length }}</span>
  </div>
  <div class="route-buttons">
    <button (click)="clearRoute()" class="btn-secondary">Limpiar</button>
    <button (click)="saveRoute()" [disabled]="isSaving" class="btn-primary">{{ isSaving ? 'Guardando...' : 'Guardar Ruta' }}</button>
  </div>
  @if (isLoading) {
    <div class="loading-section">Cargando...</div>
  }
</div>

<div class="map-and-table-container">
  <div class="map-container">
    <div id="map"></div>
  </div>

  <div class="saved-routes">
    <h3>Rutas Guardadas</h3>
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Puntos</th>
          <th>Acción</th>
        </tr>
      </thead>
      <tbody>
        @for (ruta of rutasGuardadas; track ruta.id) {
          <tr>
            <td>{{ ruta.nombre }}</td>
            <td>{{ ruta.coordenadas.length || 0 }}</td>
            <td>
              <button (click)="verRuta(ruta)">Ver</button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
  